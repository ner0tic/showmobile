CREATE TABLE showmobile_address_book (id BIGINT AUTO_INCREMENT, label VARCHAR(30), street VARCHAR(50) NOT NULL, suburb VARCHAR(50), city VARCHAR(30) NOT NULL, zone_id BIGINT NOT NULL, postal_code VARCHAR(10) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX zone_id_idx (zone_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE showmobile_address_format (id BIGINT AUTO_INCREMENT, address_format VARCHAR(128) NOT NULL, address_summary VARCHAR(48), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE showmobile_band (id BIGINT AUTO_INCREMENT, name TEXT NOT NULL, bio TEXT, img TEXT, logo TEXT, url TEXT, email TEXT, zone_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE showmobile_country (id BIGINT AUTO_INCREMENT, name VARCHAR(64) NOT NULL UNIQUE, iso_code2 VARCHAR(2) UNIQUE, iso_code3 VARCHAR(3) UNIQUE, address_format_id BIGINT NOT NULL, flag TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE showmobile_driver (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, vehicle_id BIGINT NOT NULL, event_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), INDEX event_id_idx (event_id), INDEX vehicle_id_idx (vehicle_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE showmobile_event (id BIGINT AUTO_INCREMENT, start_time DATETIME NOT NULL, cost FLOAT(18, 2) NOT NULL, venue_id BIGINT NOT NULL, flyer TEXT, user_id BIGINT NOT NULL, contact TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX venue_id_idx (venue_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE showmobile_event_band (id BIGINT AUTO_INCREMENT, showmobile_event_id BIGINT, showmobile_band_id BIGINT, INDEX showmobile_event_id_idx (showmobile_event_id), INDEX showmobile_band_id_idx (showmobile_band_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE showmobile_passenger (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, driver_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), INDEX driver_id_idx (driver_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE showmobile_vehicle (id BIGINT AUTO_INCREMENT, year INT NOT NULL, make TEXT NOT NULL, model TEXT NOT NULL, color_id BIGINT NOT NULL, mpg BIGINT NOT NULL, seats BIGINT NOT NULL, user_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX color_id_idx (color_id), INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE showmobile_vehicle_color (id BIGINT AUTO_INCREMENT, name TEXT NOT NULL, hex TEXT NOT NULL, rgb TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE showmobile_venue (id BIGINT AUTO_INCREMENT, name VARCHAR(100) NOT NULL, address_book_id BIGINT NOT NULL, phone BIGINT, fax BIGINT, url VARCHAR(25), email TEXT, img TEXT, logo TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX address_book_id_idx (address_book_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE showmobile_zone (id BIGINT AUTO_INCREMENT, country_id BIGINT NOT NULL, code VARCHAR(32), name VARCHAR(64) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX country_id_idx (country_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_forgot_password (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, unique_key VARCHAR(255), expires_at DATETIME NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_group (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_group_permission (group_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(group_id, permission_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_permission (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_remember_key (id BIGINT AUTO_INCREMENT, user_id BIGINT, remember_key VARCHAR(32), ip_address VARCHAR(50), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user (id BIGINT AUTO_INCREMENT, first_name VARCHAR(255), last_name VARCHAR(255), email_address VARCHAR(255) NOT NULL UNIQUE, username VARCHAR(128) NOT NULL UNIQUE, algorithm VARCHAR(128) DEFAULT 'sha1' NOT NULL, salt VARCHAR(128), password VARCHAR(128), is_active TINYINT(1) DEFAULT '1', is_super_admin TINYINT(1) DEFAULT '0', last_login DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user_group (user_id BIGINT, group_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, group_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user_permission (user_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, permission_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user_profile (id BIGINT AUTO_INCREMENT, user_id BIGINT, bio TEXT, address_id BIGINT NOT NULL, INDEX user_id_idx (user_id), INDEX address_id_idx (address_id), PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE showmobile_address_book ADD CONSTRAINT showmobile_address_book_zone_id_showmobile_zone_id FOREIGN KEY (zone_id) REFERENCES showmobile_zone(id);
ALTER TABLE showmobile_driver ADD CONSTRAINT showmobile_driver_vehicle_id_showmobile_vehicle_id FOREIGN KEY (vehicle_id) REFERENCES showmobile_vehicle(id);
ALTER TABLE showmobile_driver ADD CONSTRAINT showmobile_driver_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id);
ALTER TABLE showmobile_driver ADD CONSTRAINT showmobile_driver_event_id_showmobile_event_id FOREIGN KEY (event_id) REFERENCES showmobile_event(id);
ALTER TABLE showmobile_event ADD CONSTRAINT showmobile_event_venue_id_showmobile_venue_id FOREIGN KEY (venue_id) REFERENCES showmobile_venue(id);
ALTER TABLE showmobile_event_band ADD CONSTRAINT showmobile_event_band_showmobile_event_id_showmobile_event_id FOREIGN KEY (showmobile_event_id) REFERENCES showmobile_event(id);
ALTER TABLE showmobile_event_band ADD CONSTRAINT showmobile_event_band_showmobile_band_id_showmobile_band_id FOREIGN KEY (showmobile_band_id) REFERENCES showmobile_band(id);
ALTER TABLE showmobile_passenger ADD CONSTRAINT showmobile_passenger_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id);
ALTER TABLE showmobile_passenger ADD CONSTRAINT showmobile_passenger_driver_id_showmobile_driver_id FOREIGN KEY (driver_id) REFERENCES showmobile_driver(id);
ALTER TABLE showmobile_vehicle ADD CONSTRAINT showmobile_vehicle_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id);
ALTER TABLE showmobile_vehicle ADD CONSTRAINT showmobile_vehicle_color_id_showmobile_vehicle_color_id FOREIGN KEY (color_id) REFERENCES showmobile_vehicle_color(id);
ALTER TABLE showmobile_venue ADD CONSTRAINT showmobile_venue_address_book_id_showmobile_address_book_id FOREIGN KEY (address_book_id) REFERENCES showmobile_address_book(id);
ALTER TABLE showmobile_zone ADD CONSTRAINT showmobile_zone_country_id_showmobile_country_id FOREIGN KEY (country_id) REFERENCES showmobile_country(id);
ALTER TABLE sf_guard_forgot_password ADD CONSTRAINT sf_guard_forgot_password_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_remember_key ADD CONSTRAINT sf_guard_remember_key_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_profile ADD CONSTRAINT sf_guard_user_profile_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id);
ALTER TABLE sf_guard_user_profile ADD CONSTRAINT sf_guard_user_profile_address_id_showmobile_address_book_id FOREIGN KEY (address_id) REFERENCES showmobile_address_book(id);
